{"version":3,"sources":["assets\\Script-ywj\\Gamey.js"],"names":["cc","Class","Component","properties","arrowPrefab","type","Prefab","targetPrefab","onLoad","director","getPhysicsManager","enabled","node","on","Node","EventType","TOUCH_START","onTouchStart","TOUCH_MOVE","onTouchMove","TOUCH_END","onTouchEnd","start","createArrow","schedule","createTarget","update","dt","event","arrow","updateArrowRotation","getLocation","shoot","scheduleOnce","arrowNode","instantiate","x","y","zIndex","parent","getComponent","targetNode","randomInt","min","max","Math","floor","random"],"mappings":";;;;;;AAAA;AACAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,WAAW,EAAE;AACTC,MAAAA,IAAI,EAAEL,EAAE,CAACM,MADA;AAET,iBAAS;AAFA,KADL;AAKRC,IAAAA,YAAY,EAAE;AACVF,MAAAA,IAAI,EAAEL,EAAE,CAACM,MADC;AAEV,iBAAS;AAFC;AALN,GAHP;AAcL;AAEAE,EAAAA,MAhBK,oBAgBK;AACNR,IAAAA,EAAE,CAACS,QAAH,CAAYC,iBAAZ,GAAgCC,OAAhC,GAA0C,IAA1C,CADM,CACyC;;AAC/C,SAAKC,IAAL,CAAUC,EAAV,CAAab,EAAE,CAACc,IAAH,CAAQC,SAAR,CAAkBC,WAA/B,EAA4C,KAAKC,YAAjD,EAA+D,IAA/D,EAFM,CAE+D;;AACrE,SAAKL,IAAL,CAAUC,EAAV,CAAab,EAAE,CAACc,IAAH,CAAQC,SAAR,CAAkBG,UAA/B,EAA2C,KAAKC,WAAhD,EAA6D,IAA7D,EAHM,CAG6D;;AACnE,SAAKP,IAAL,CAAUC,EAAV,CAAab,EAAE,CAACc,IAAH,CAAQC,SAAR,CAAkBK,SAA/B,EAA0C,KAAKC,UAA/C,EAA2D,IAA3D,EAJM,CAI2D;AACpE,GArBI;AAuBLC,EAAAA,KAvBK,mBAuBI;AACL,SAAKC,WAAL;AACA,SAAKC,QAAL,CAAc,YAAW;AACrB,WAAKC,YAAL;AACH,KAFD,EAEG,CAFH;AAGH,GA5BI;AA8BLC,EAAAA,MA9BK,kBA8BGC,EA9BH,EA8BO,CAEX,CAhCI;AAkCLV,EAAAA,YAlCK,wBAkCSW,KAlCT,EAkCgB;AACjB,QAAI,KAAKC,KAAT,EAAgB;AACZ,WAAKA,KAAL,CAAWC,mBAAX,CAA+BF,KAAK,CAACG,WAAN,EAA/B;AACH;AACJ,GAtCI;AAwCLZ,EAAAA,WAxCK,uBAwCQS,KAxCR,EAwCe;AAChB,QAAI,KAAKC,KAAT,EAAgB;AACZ,WAAKA,KAAL,CAAWC,mBAAX,CAA+BF,KAAK,CAACG,WAAN,EAA/B;AACH;AACJ,GA5CI;AA8CLV,EAAAA,UA9CK,sBA8COO,KA9CP,EA8Cc;AACf,QAAI,KAAKC,KAAT,EAAgB;AACZ,WAAKA,KAAL,CAAWG,KAAX;AACA,WAAKH,KAAL,GAAa,IAAb;AACA,WAAKI,YAAL,CAAkB,YAAW;AACzB,aAAKV,WAAL;AACH,OAFD,EAEG,GAFH;AAGH;AACJ,GAtDI;AAwDLA,EAAAA,WAxDK,yBAwDU;AACX,QAAIW,SAAS,GAAGlC,EAAE,CAACmC,WAAH,CAAe,KAAK/B,WAApB,CAAhB;AACA8B,IAAAA,SAAS,CAACE,CAAV,GAAc,CAAC,GAAf;AACAF,IAAAA,SAAS,CAACG,CAAV,GAAc,GAAd;AACAH,IAAAA,SAAS,CAACI,MAAV,GAAmB,CAAnB;AACAJ,IAAAA,SAAS,CAACK,MAAV,GAAmB,KAAK3B,IAAxB;AACA,SAAKiB,KAAL,GAAaK,SAAS,CAACM,YAAV,CAAuB,OAAvB,CAAb;AACH,GA/DI;AAiELf,EAAAA,YAjEK,0BAiEW;AACZ,QAAIgB,UAAU,GAAGzC,EAAE,CAACmC,WAAH,CAAe,KAAK5B,YAApB,CAAjB;AACAkC,IAAAA,UAAU,CAACL,CAAX,GAAe,KAAKM,SAAL,CAAe,GAAf,EAAoB,GAApB,CAAf;AACAD,IAAAA,UAAU,CAACJ,CAAX,GAAe,CAAf;AACAI,IAAAA,UAAU,CAACF,MAAX,GAAoB,KAAK3B,IAAzB;AACH,GAtEI;AAwEL8B,EAAAA,SAxEK,qBAwEMC,GAxEN,EAwEWC,GAxEX,EAwEgB;AACjB,WAAOC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,MAAeH,GAAG,GAAGD,GAAN,GAAY,CAA3B,IAAgCA,GAA3C,CAAP;AACH;AA1EI,CAAT","sourceRoot":"/","sourcesContent":["// const score = require(\"GameScore\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        arrowPrefab: {\r\n            type: cc.Prefab,\r\n            default: null\r\n        },\r\n        targetPrefab: {\r\n            type: cc.Prefab,\r\n            default: null\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        cc.director.getPhysicsManager().enabled = true;//开启物理引擎\r\n        this.node.on(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);//触摸开始\r\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, this.onTouchMove, this);//触摸移动\r\n        this.node.on(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);//触摸结束，物体内部结束\r\n    },\r\n\r\n    start () {\r\n        this.createArrow();\r\n        this.schedule(function() {\r\n            this.createTarget();\r\n        }, 2);\r\n    },\r\n\r\n    update (dt) {\r\n\r\n    },\r\n\r\n    onTouchStart (event) {\r\n        if (this.arrow) {\r\n            this.arrow.updateArrowRotation(event.getLocation());\r\n        }\r\n    },\r\n\r\n    onTouchMove (event) {\r\n        if (this.arrow) {\r\n            this.arrow.updateArrowRotation(event.getLocation());\r\n        }\r\n    },\r\n\r\n    onTouchEnd (event) {\r\n        if (this.arrow) {\r\n            this.arrow.shoot();\r\n            this.arrow = null;\r\n            this.scheduleOnce(function() {\r\n                this.createArrow();\r\n            }, 0.5);\r\n        }\r\n    },\r\n\r\n    createArrow () {\r\n        let arrowNode = cc.instantiate(this.arrowPrefab);\r\n        arrowNode.x = -600;\r\n        arrowNode.y = 250;\r\n        arrowNode.zIndex = 1;\r\n        arrowNode.parent = this.node;\r\n        this.arrow = arrowNode.getComponent(\"Arrow\");\r\n    },\r\n\r\n    createTarget () {\r\n        let targetNode = cc.instantiate(this.targetPrefab);\r\n        targetNode.x = this.randomInt(200, 750);\r\n        targetNode.y = 0;\r\n        targetNode.parent = this.node;\r\n    },\r\n\r\n    randomInt (min, max) {\r\n        return Math.floor(Math.random()*(max - min + 1) + min);\r\n    }\r\n});\r\n"]}