{"version":3,"sources":["assets\\scripts\\lsm\\MainController.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n\r\n    @property(cc.Prefab)\r\n    box:cc.Prefab = null;//预制体 箱子\r\n\r\n    @property(cc.Node)\r\n    xiangji:cc.Node = null;//相机\r\n\r\n    @property(cc.Node)\r\n    boxParent:cc.Node = null;//箱子的父节点\r\n\r\n    @property(cc.Node)\r\n    box_self:cc.Node = null;//最开始的箱子自身\r\n\r\n    @property(cc.Label)\r\n    score_lb:cc.Label = null;//分数\r\n\r\n    @property(cc.Node)\r\n    lb_score:cc.Node = null;//分数\r\n\r\n    isok:boolean = true;//是否可以生成新的箱子\r\n\r\n    score:number = 0.5;//分数\r\n\r\n    onLoad(){\r\n        this.xiangji.on(cc.Node.EventType.TOUCH_START,this.down,this);//给相机在触摸的时候添加点击事件\r\n        this.xiangji.width = this.node.width;//相机的宽和高和屏幕的宽和高一样\r\n        this.xiangji.height = this.node.height;\r\n    }\r\n\r\n    update(dt:number){\r\n        this.score_lb.string = \"高度:\" + this.score.toString() + \"米\";//每秒获取最新分数\r\n        this.lb_score.y = this.xiangji.y+(this.xiangji.height/2)-this.lb_score.height-10;//介绍和分数的最佳位置\r\n        //this.jieshao.y = this.xiangji.y-(this.xiangji.height/2)+this.jieshao.height+10;\r\n        \r\n            if(this.score == 2.5){//如果高度达到\r\n                console.log(\"成功！\")\r\n                this.win();\r\n            }\r\n        }\r\n    \r\n        win(){\r\n            console.log(\"通过游戏\");\r\n            this.scheduleOnce(function() {\r\n                cc.director.loadScene(\"Win\");\r\n            },0.8);\r\n            //游戏通关场景跳转\r\n        }\r\n    \r\n\r\n    down(){//箱子下降\r\n        if(this.isok == true){\r\n            let box = this.boxParent.children[this.boxParent.childrenCount-1].getComponent(\"Box\");//获取box组件\r\n            box.isdown = true;//箱子开始下降\r\n            box.move.stop(\"move\");//停止播放移动动画\r\n            console.log(\"点击了相机\");\r\n            this.scheduleOnce(function() {\r\n                this.shengcheng();\r\n            },0.5);//为了防止箱子堆到一块，在0.5秒后生成新的箱子\r\n            this.score += 0.5;//随机加分数\r\n            this.isok = false;\r\n            this.scheduleOnce(function() {\r\n                this.isok = true;\r\n            },0.5);//0.5秒后才可以继续生成新箱子\r\n        }\r\n    }\r\n\r\n    shengcheng(){//生成新箱子\r\n        let node = cc.instantiate(this.box)//你要复制的节点名称\r\n        node.parent = this.boxParent;//复制节点的父节点是什么\r\n        node.setPosition(cc.v2(0,(this.xiangji.y+this.xiangji.height/2)-this.box_self.height-50));//复制的节点的位置\r\n\r\n        let pos : cc.Vec2[] = [];\r\n        pos.push(cc.v2(this.xiangji.position));\r\n        pos.push(cc.v2(0,this.xiangji.y+this.box_self.height));\r\n\r\n      \r\n       \r\n        console.log(\"生成了新的箱子\");\r\n    }\r\n\r\n}\r\n\r\n"]}