{"version":3,"sources":["assets\\Script-ywj\\GameMgr.js"],"names":["score","require","conscious","cc","Class","Component","properties","type","Label","tooltip","timeBar","ProgressBar","losesound","AudioClip","winsound","onLoad","limitTime","time","schedule","progress","hitscore","audioEngine","play","director","loadScene","consciousNumber","start","update","dt","string"],"mappings":";;;;;;AAAA;AACA,IAAIA,KAAK,GAAGC,OAAO,CAAC,WAAD,CAAnB;;AACA,IAAIC,SAAS,GAAGD,OAAO,CAAC,gBAAD,CAAvB;;AACAE,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRN,IAAAA,KAAK,EAAG;AACJO,MAAAA,IAAI,EAACJ,EAAE,CAACK,KADJ;AAEJ,iBAAQ,IAFJ;AAGJC,MAAAA,OAAO,EAAC;AAHJ,KADA;AAMRC,IAAAA,OAAO,EAAG;AACNH,MAAAA,IAAI,EAACJ,EAAE,CAACQ,WADF;AAEN,iBAAQ,IAFF;AAGNF,MAAAA,OAAO,EAAC;AAHF,KANF;AAWRG,IAAAA,SAAS,EAAG;AACRL,MAAAA,IAAI,EAAGJ,EAAE,CAACU,SADF;AAER,iBAAU;AAFF,KAXJ;AAeRC,IAAAA,QAAQ,EAAG;AACPP,MAAAA,IAAI,EAAGJ,EAAE,CAACU,SADH;AAEP,iBAAU;AAFH;AAfH,GAHP;AAwBL;AAEAE,EAAAA,MA1BK,oBA0BK;AACN,QAAIC,SAAS,GAAGhB,KAAK,CAACiB,IAAtB,CADM,CACqB;;AAC3B,SAAKC,QAAL,CAAc,YAAU;AACpB,UAAGlB,KAAK,CAACiB,IAAN,GAAa,CAAhB,EAAkB;AACdjB,QAAAA,KAAK,CAACiB,IAAN,GADc,CACD;;AACb,aAAKP,OAAL,CAAaS,QAAb,GAAwBnB,KAAK,CAACiB,IAAN,GAAaD,SAArC;AACH,OAHD,MAGK;AACD,YAAGhB,KAAK,CAACoB,QAAN,IAAiB,EAApB,EAAuB;AACnB;AACAjB,UAAAA,EAAE,CAACkB,WAAH,CAAeC,IAAf,CAAoB,KAAKR,QAAzB;AACAX,UAAAA,EAAE,CAACoB,QAAH,CAAYC,SAAZ,CAAsB,MAAtB;AACH,SAJD,MAIK;AACD;AACAtB,UAAAA,SAAS,CAACuB,eAAV,IAA6B,CAA7B;AACAtB,UAAAA,EAAE,CAACkB,WAAH,CAAeC,IAAf,CAAoB,KAAKV,SAAzB;AACAT,UAAAA,EAAE,CAACoB,QAAH,CAAYC,SAAZ,CAAsB,OAAtB;AACAxB,UAAAA,KAAK,CAACiB,IAAN,GAAaD,SAAb;AACAhB,UAAAA,KAAK,CAACoB,QAAN,GAAiB,CAAjB;AACH;AACJ;AACJ,KAlBD,EAkBE,CAlBF;AAmBH,GA/CI;AAiDLM,EAAAA,KAjDK,mBAiDI,CAER,CAnDI;AAqDLC,EAAAA,MArDK,kBAqDGC,EArDH,EAqDO;AACR,SAAK5B,KAAL,CAAW6B,MAAX,GAAoB7B,KAAK,CAACoB,QAAN,GAAe,KAAnC,CADQ,CACiC;AAC5C;AAvDI,CAAT","sourceRoot":"/","sourcesContent":["// import { hitscore } from \"GameScore\";\r\nvar score = require(\"GameScore\");\r\nvar conscious = require('globalVariable');\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        score : {\r\n            type:cc.Label,\r\n            default:null,\r\n            tooltip:\"得分显示Label组件\",\r\n        },\r\n        timeBar : {\r\n            type:cc.ProgressBar,\r\n            default:null,\r\n            tooltip:\"时间进度条\",\r\n        },\r\n        losesound : {\r\n            type : cc.AudioClip,\r\n            default : null\r\n        },\r\n        winsound : {\r\n            type : cc.AudioClip,\r\n            default : null\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        let limitTime = score.time;//游戏限时总时间\r\n        this.schedule(function(){\r\n            if(score.time > 0){\r\n                score.time--;//倒计时\r\n                this.timeBar.progress = score.time / limitTime;\r\n            }else{\r\n                if(score.hitscore >=20){                    \r\n                    // this.winsound.play();\r\n                    cc.audioEngine.play(this.winsound);\r\n                    cc.director.loadScene(\"Winy\");\r\n                }else{\r\n                    // this.losesound.play();\r\n                    conscious.consciousNumber -= 1;\r\n                    cc.audioEngine.play(this.losesound);\r\n                    cc.director.loadScene(\"Losey\");\r\n                    score.time = limitTime;\r\n                    score.hitscore = 0;\r\n                }\r\n            }\r\n        },1);\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    update (dt) {\r\n        this.score.string = score.hitscore+\"/20\";//加分\r\n    },\r\n});\r\n"]}